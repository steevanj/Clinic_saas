{% extends "base.html" %}

{% block title %}Patients | Clinic SaaS{% endblock %}

{% block content %}

<div class="stack">

  <!-- Header -->
  <div class="page-header">
    <h2>Patients</h2>
    <span class="muted">
      {{ patients|length }} patients
    </span>
  </div>

  <!-- Patient Table -->
  <div class="card table-wrapper">
    <table class="table">
      <thead>
        <tr>
          <th>MRN</th>
          <th>Name</th>
          <th>Age</th>
          <th>Gender</th>
          <th>Phone</th>
          <th>Blood Group</th>
        </tr>
      </thead>
      <tbody>
        {% for patient in patients %}
        <tr>
          <td class="strong">{{ patient.mrn }}</td>
          <td>{{ patient.name }}</td>
          <td>{{ patient.age|default:"—" }}</td>
          <td>{{ patient.gender }}</td>
          <td>{{ patient.phone }}</td>
          <td>{{ patient.blood_group|default:"—" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="empty">
            No patients found
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Add Patient Form -->
  <div class="card">
    <h3 class="section-title">Add New Patient</h3>

    <form method="POST" class="form-grid">
      {% csrf_token %}

      <input name="name" placeholder="Full Name" required>
      <input type="date" name="date_of_birth">

      <select name="gender" required>
        <option value="">Select Gender</option>
        <option value="MALE">Male</option>
        <option value="FEMALE">Female</option>
        <option value="OTHER">Other</option>
      </select>

      <input name="phone" placeholder="Phone" required>
      <input name="email" placeholder="Email">

      <select name="blood_group">
        <option value="">Blood Group</option>
        <option>A+</option><option>A-</option>
        <option>B+</option><option>B-</option>
        <option>O+</option><option>O-</option>
        <option>AB+</option><option>AB-</option>
      </select>

      <input name="insurance_provider" placeholder="Insurance Provider">
      <input name="insurance_number" placeholder="Insurance Number">

      <input name="emergency_contact_name" placeholder="Emergency Contact Name">
      <input name="emergency_contact_phone" placeholder="Emergency Contact Phone">

      <textarea name="address" placeholder="Address" class="span-2"></textarea>
      <textarea name="medical_history" placeholder="Medical History" class="span-2"></textarea>

      <button type="submit" class="btn-primary span-2">
        Save Patient
      </button>
    </form>
  </div>

</div>

{% endblock %}
